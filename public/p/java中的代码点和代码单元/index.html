<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='本文转自Java中的代码点和代码单元,原出处没找到,对不起原作者了 摘要 本文介绍 Java 平台支持增补字符的方式。增补字符是 Unicode 标准中代码点超出 U&#43;FFFF 的字符'><title>Java中的代码点和代码单元</title>

<link rel='canonical' href='https://arkvaer.io/p/java%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E7%82%B9%E5%92%8C%E4%BB%A3%E7%A0%81%E5%8D%95%E5%85%83/'>

<link rel="stylesheet" href="/scss/style.min.450926226e724574a6b936335ea06111f8aeb253d932c86cb2cc807341cd2889.css"><meta property='og:title' content='Java中的代码点和代码单元'>
<meta property='og:description' content='本文转自Java中的代码点和代码单元,原出处没找到,对不起原作者了 摘要 本文介绍 Java 平台支持增补字符的方式。增补字符是 Unicode 标准中代码点超出 U&#43;FFFF 的字符'>
<meta property='og:url' content='https://arkvaer.io/p/java%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E7%82%B9%E5%92%8C%E4%BB%A3%E7%A0%81%E5%8D%95%E5%85%83/'>
<meta property='og:site_name' content='Waver 的博客'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Java' /><meta property='article:published_time' content='2018-05-20T20:27:00&#43;08:00'/><meta property='article:modified_time' content='2022-04-10T01:46:46&#43;08:00'/>
<meta name="twitter:site" content="@arkvaer">
    <meta name="twitter:creator" content="@arkvaer"><meta name="twitter:title" content="Java中的代码点和代码单元">
<meta name="twitter:description" content="本文转自Java中的代码点和代码单元,原出处没找到,对不起原作者了 摘要 本文介绍 Java 平台支持增补字符的方式。增补字符是 Unicode 标准中代码点超出 U&#43;FFFF 的字符">
    <link rel="shortcut icon" href="true" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_huaccf751e998e924f194edcb88b85a25f_202352_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">🍥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Waver 的博客</a></h1>
            <h2 class="site-description">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/arkvaer'
                        target="_blank"
                        title="GitHub"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Twitter"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页</span>
            </a>
        </li>
        
        

        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归档</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        

        <li >
            <a href='/%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>链接</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
                <li id="i18n-switch">  
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                    <select name="language" onchange="window.location.href = this.selectedOptions[0].value">
                        
                            <option value="https://arkvaer.io/en/" >English</option>
                        
                            <option value="https://arkvaer.io/" selected>中文</option>
                        
                    </select>
                </li>
            
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>暗色模式</span>
                </li>
            
        </div>
    </ol>
</aside>
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/java/" >
                Java
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/java%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E7%82%B9%E5%92%8C%E4%BB%A3%E7%A0%81%E5%8D%95%E5%85%83/">Java中的代码点和代码单元</a>
        </h2>
    
        
    </div>

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">May 20, 2018</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 18 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <blockquote>
<p>本文转自<a class="link" href="https://blog.csdn.net/weizhaozhe/article/details/3909079"  target="_blank" rel="noopener"
    >Java中的代码点和代码单元</a>,原出处没找到,对不起原作者了</p>
</blockquote>
<h3 id="摘要">摘要</h3>
<p>本文介绍 Java 平台支持增补字符的方式。增补字符是 Unicode
标准中代码点超出 U+FFFF 的字符,因此它们无法在 Java
编程语言中描述为单个的 16
位实体(例如 char 数据类型)。这些字符一般极少用,但是,有些会在诸如中文或日文人名中用到,因此,在东亚国家,政府应用程序通常会要求支持这些字符。</p>
<p>Java
平台目前正在改进,以便支持对增补字符的处理,这种改进对现有的应用程序影响微乎其微。新的低层
API 在需要时能够使用单个的字符运行。不过,大多数文本处理 API
均使用字符序列,例如 String 类或字符数组。现在,这些均解释为 UTF-16
序列,而且,这些 API 实现已转变为正确地处理增补字符。这些改进已融入 Java 2
平台 5.0 版,标准版 (J2SE)。</p>
<p>除详细解释这些改进之外,本文同时为应用程序开发人员确定和实现必要的更改提供指导,以支持整个
Unicode 字符集的使用。</p>
<h3 id="背景">背景</h3>
<p>Unicode 最初设计是作为一种固定宽度的 16 位字符编码。在 Java
编程语言中,基本数据类型 char 初衷是通过提供一种简单的、能够包含任何字符的数据类型来充分利用这种设计的优点。不过,现在看来,16
位编码的所有 65,536
个字符并不能完全表示全世界所有正在使用或曾经使用的字符。于是,Unicode
标准已扩展到包含多达 1,112,064 个字符。那些超出原来的 16
位限制的字符被称作增补字符。Unicode 标准 2.0
版是第一个包含启用增补字符设计的版本,但是,直到 3.1
版才收入第一批增补字符集。由于 J2SE 的 5.0 版必须支持 Unicode 标准 4.0
版,因此它必须支持增补字符。</p>
<p>对增补字符的支持也可能会成为东亚市场的一个普遍商业要求。政府应用程序会需要这些增补字符,以正确表示一些包含罕见中文字符的姓名。出版应用程序可能会需要这些增补字符,以表示所有的古代字符和变体字符。中国政府要求支持
GB18030(一种对整个 Unicode 字符集进行编码的字符编码标准),因此,如果是
Unicode 3.1 版或更新版本,则将包括增补字符。台湾标准 CNS-11643
包含的许多字符在 Unicode 3.1
中列为增补字符。香港政府定义了一种针对粤语的字符集,其中的一些字符是
Unicode
中的增补字符。最后,日本的一些供应商正计划利用增补字符空间中大量的专用空间收入
50,000 多个日文汉字字符变体,以便从其专有系统迁移至基于 Java
平台的解决方案。</p>
<p>因此,Java
平台不仅需要支持增补字符,而且必须使应用程序能够方便地做到这一点。由于增补字符打破了
Java
编程语言的基础设计构想,而且可能要求对编程模型进行根本性的修改,因此,Java
Community Process
召集了一个专家组,以期找到一个适当的解决方案。该小组被称为 JSR-204
专家组,使用 Unicode 增补字符支持的 Java
技术规范请求的编号。从技术上来说,该专家组的决定仅适用于 J2SE
平台,但是由于 Java 2 平台企业版 (J2EE) 处于 J2SE
平台的最上层,因此它可以直接受益,我们期望 Java 2 平台袖珍版 (J2ME)
的配置也采用相同的设计方法。</p>
<p>不过,在了解 JSR-204 专家组确定的解决方案之前,我们需要先理解一些术语。</p>
<h3 id="代码点字符编码方案utf-16这些是指什么-代码点字符编码方案-utf-16-这些是指什么">代码点、字符编码方案、UTF-16：这些是指什么？ {#代码点字符编码方案 utf-16 这些是指什么}</h3>
<p>不幸的是,引入增补字符使字符模型变得更加复杂了。在过去,我们可以简单地说“字符”,在一个基于
Unicode 的环境(例如 Java 平台)中,假定字符有 16
位,而现在我们需要更多的术语。我们会尽量介绍得相对简单一些 &mdash;
如需了解所有详细的讨论信息,您可以阅读 Unicode 标准第 2 章或 Unicode
技术报告 17“字符编码模型”。Unicode
专业人士可略过所有介绍直接参阅本部分中的最后定义。</p>
<p>字符是抽象的最小文本单位。它没有固定的形状(可能是一个字形),而且没有值。&ldquo;A&quot;是一个字符,&ldquo;€&rdquo;(德国、法国和许多其他欧洲国家通用货币的标志)也是一个字符。</p>
<p>字符集是字符的集合。例如,汉字字符是中国人最先发明的字符,在中文、日文、韩文和越南文的书写中使用。</p>
<p>编码字符集是一个字符集,它为每一个字符分配一个唯一数字。Unicode
标准的核心是一个编码字符集,字母“A”的编码为 004116
和字符“€”的编码为 20AC16.Unicode
标准始终使用十六进制数字,而且在书写时在前面加上前缀“U+”,所以“A”的编码书写为“U+0041”。</p>
<p>代码点是指可用于编码字符集的数字。编码字符集定义一个有效的代码点范围,但是并不一定将字符分配给所有这些代码点。有效的
Unicode 代码点范围是 U+0000 至 U+10FFFF.Unicode 4.0
将字符分配给一百多万个代码点中的 96,382 代码点。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">增补字符是代码点在 U+10000 至 U+10FFFF 范围之间的字符,也就是那些使用原始的 Unicode 的 16 位设计无法表示的字符。从 U+0000 至 U+FFFF 之间的字符集有时候被称为基本多语言面 (BMP)。因此,每一个 Unicode 字符要么属于 BMP,要么属于增补字符。
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">字符编码方案是从一个或多个编码字符集到一个或多个固定宽度代码单元序列的映射。最常用的代码单元是字节，但是 16 位或 32 位整数也可用于内部处理。UTF-32、UTF-16 和 UTF-8 是 Unicode 标准的编码字符集的字符编码方案。
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">UTF-32 即将每一个 Unicode 代码点表示为相同值的 32 位整数。很明显，它是内部处理最方便的表达方式，但是，如果作为一般字符串表达方式，则要消耗更多的内存。
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">UTF-16 使用一个或两个未分配的 16 位代码单元的序列对 Unicode 代码点进行编码。值 U+0000 至 U+FFFF 编码为一个相同值的 16 位单元。增补字符编码为两个代码单元，第一个单元来自于高代理范围(U+D800 至 U+DBFF)，第二个单元来自于低代理范围(U+DC00 至 U+DFFF)。这在概念上可能看起来类似于多字节编码，但是其中有一个重要区别：值 U+D800 至 U+DFFF 保留用于 UTF-16;没有这些值分配字符作为代码点。这意味着，对于一个字符串中的每个单独的代码单元，软件可以识别是否该代码单元表示某个单单元字符，或者是否该代码单元是某个双单元字符的第一个或第二单元。这相当于某些传统的多字节字符编码来说是一个显著的改进，在传统的多字节字符编码中，字节值 0x41 既可能表示字母“A”，也可能是一个双字节字符的第二个字节。
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">UTF-8 使用一至四个字节的序列对编码 Unicode 代码点进行编码。U+0000 至 U+007F 使用一个字节编码，U+0080 至 U+07FF 使用两个字节，U+0800 至 U+FFFF 使用三个字节，而 U+10000 至 U+10FFFF 使用四个字节。UTF-8 设计原理为：字节值 0x00 至 0x7F 始终表示代码点 U+0000 至 U+007F(Basic Latin 字符子集，它对应 ASCII 字符集)。这些字节值永远不会表示其他代码点，这一特性使 UTF-8 可以很方便地在软件中将特殊的含义赋予某些 ASCII 字符。
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="下表所示为几个字符不同表达方式的比较">下表所示为几个字符不同表达方式的比较：</h4>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Unicode 代码点</th>
<th>U+0041</th>
<th>U+00DF</th>
<th>U+6771</th>
<th>U+10400</th>
</tr>
</thead>
<tbody>
<tr>
<td>表示字形</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>UTF-32 代码单元</td>
<td>00000041</td>
<td>000000DF</td>
<td>00006771</td>
<td>00010400</td>
</tr>
<tr>
<td>UTF-16 代码单元</td>
<td>0041</td>
<td>00DF</td>
<td>6771</td>
<td>D801 DC00</td>
</tr>
<tr>
<td>UTF-8 代码单元</td>
<td>41</td>
<td>C3 9F</td>
<td>E6 9D B1</td>
<td>F0 90 90 80</td>
</tr>
</tbody>
</table></div>
<p>另外，本文在许多地方使用术语字符序列或 char 序列概括 Java 2
平台识别的所有字符序列的容器：char[]，
java.lang.CharSequence 的实现(例如 String 类)，和 java.text.CharacterIterator 的实现。</p>
<p>这么多术语。它们与在 Java 平台中支持增补字符有什么关系呢？</p>
<h3 id="java-平台中增补字符的设计方法">Java 平台中增补字符的设计方法</h3>
<p>JSR-204 专家组必须作出的主要决定是如何在 Java API
中表示增补字符，包括单个字符和所有形式的字符序列。专家组考虑并排除了多种方法：</p>
<p>重新定义基本类型 char，使其具有 32 位，这样也会使所有形式的 char 序列成为
UTF-32 序列。</p>
<p>在现有的 16 位类型 char 的基础上，为字符引入一种新的 32
位基本类型(例如，char32)。所有形式的 Char 序列均基于 UTF-16.</p>
<p>在现有的 16 位类型 char 的基础上，为字符引入一种新的 32
位基本类型(例如，char32)。String 和 StringBuffer 接受并行
API，并将它们解释为 UTF-16 序列或 UTF-32 序列;其他 char 序列继续基于
UTF-16.</p>
<p>使用 int 表示增补的代码点。String 和 StringBuffer 接受并行
API，并将它们解释为 UTF-16 序列或 UTF-32 序列;其他 char 序列继续基于
UTF-16.</p>
<p>使用代理 char 对，表示增补代码点。所有形式的 char 序列基于 UTF-16.</p>
<p>引入一种封装字符的类。String 和 StringBuffer 接受新的
API，并将它们解释为此类字符的序列。</p>
<p>使用一个 CharSequence 实例和一个索引的组合表示代码点</p>
<p>在这些方法中，一些在早期就被排除了。例如，重新定义基本类型 char，使其具有
32 位，这对于全新的平台可能会非常有吸引力，但是，对于 J2SE
来说，它会与现有的 Java 虚拟机 1、序列化和其他接口不兼容，更不用说基于
UTF-32 的字符串要使用两倍于基于 UTF-16
的字符串的内存了。添加一种新类型的 char32 可能会简单一些，但是仍然会出现虚拟机和序列化方面的问题。而且，语言更改通常需要比
API
更改有更长的提前期，因此，前面两种方法会对增补字符支持带来无法接受的延迟。为了在余下的方法中筛选出最优方案，实现小组使用四种不同的方法，在大量进行低层字符处理的代码(java.util.regex 包)中实现了对增补字符支持，并对这四种方法的难易程度和运行表现进行了比较。</p>
<p>最终，专家组确定了一种分层的方法：</p>
<p>使用基本类型 int 在低层 API 中表示代码点，例如 Character 类的静态方法。
将所有形式的 char 序列均解释为 UTF-16 序列，并促进其在更高层级 API
中的使用。 提供 API，以方便在各种 char 和基于代码点的表示法之间的转换。</p>
<p>在需要时，此方法既能够提供一种概念简明且高效的单个字符表示法，又能够充分利用通过改进可支持增补字符的现有
API.同时，还能够促进字符序列在单个字符上的应用，这一点一般对于国际化的软件很有好处。</p>
<p>在这种方法中，一个 char 表示一个 UTF-16
代码单元，这样对于表示代码点有时并不够用。您会注意到，J2SE
技术规范现在使用术语代码点和 UTF-16
代码单元(表示法是相关的)以及通用术语字符(表示法与该讨论没有关系)。API
通常使用名称 codePoint 描述表示代码点的类型 int 的变量，而 UTF-16
代码单元的类型当然为 char.我们将在下面两部分中了解到 J2SE 平台的实质变化
&mdash; 其中一部分介绍单个代码点的低层
API，另一部分介绍采用字符序列的高层接口。</p>
<p>开放的增补字符：基于代码点的 API</p>
<p>新增的低层 API
分为两大类：用于各种 char 和基于代码点的表示法之间转换的方法和用于分析和映射代码点的方法。</p>
<p>最基本的转换方法是 Character.toCodePoint(char high， char low)(用于将两个
UTF-16 代码单元转换为一个代码点)和 Character.toChars(int
codePoint)(用于将指定的代码点转换为一个或两个 UTF-16
代码单元，然后封装到一个 char[]内。不过，由于大多数情况下文本以字符序列的形式出现，因此，另外提供 codePointAt 和 codePointBefore 方法，用于将代码点从各种字符序列表示法中提取出来：Character.codePointAt(char[]
a， int index)和 String.codePointBefore(int
index)是两种典型的例子。在将代码点插入字符序列时，大多数情况下均有一些针对 StringBuffer 和 StringBuilder 类的 appendCodePoint(int
codePoint)方法，以及一个用于提取表示代码点的 int[]的 String 构建器。</p>
<p>几种用于分析代码单元和代码点的方法有助于转换过程：Character
类中的 isHighSurrogate 和 isLowSurrogate 方法可以识别用于表示增补字符的 char 值;charCount(int
codePoint)方法可以确定是否需要将某个代码点转换为一个或两个 char.但是，大多数基于代码点的方法均能够对所有
Unicode 字符实现基于 char 的旧方法对 BMP
字符所实现的功能。以下是一些典型例子：</p>
<p>Character.isLetter(int codePoint)可根据 Unicode 标准识别字母。
Character.isJavaIdentifierStart(int codePoint)可根据 Java
语言规范确定代码点是否可以启动标识符。 Character.UnicodeBlock.of(int
codePoint)可搜索代码点所属的 Unicode 字符子集。
Character.toUpperCase(int
codePoint)可将给定的代码点转换为其大写等值字符。尽管此方法能够支持增补字符，但是它仍然不能解决根本的问题，即在某些情况下，逐个字符的转换无法正确完成。例如，德文字符“&quot;？&quot;”应该转换为“SS”，这需要使用 String.toUpperCase 方法。</p>
<p>注意大多数接受代码点的方法并不检查给定的 int 值是否处于有效的 Unicode
代码点范围之内(如上所述，只有 0x0 至 0x10FFFF
之间的范围是有效的)。在大多数情况下，该值是以确保其有效的方法产生的，在这些低层
API
中反复检查其有效性可能会对系统性能造成负面的影响。在无法确保有效性的情况下，应用程序必须使用 Character.isValidCodePoint 方法确保代码点有效。大多数方法对于无效的代码点采取的行为没有特别加以指定，不同的实现可能会有所不同。</p>
<p>API 包含许多简便的方法，这些方法可使用其他低层的 API
实现，但是专家组觉得，这些方法很常用，将它们添加到 J2SE
平台上很有意义。不过，专家组也排除了一些建议的简便方法，这给我们提供了一次展示自己实现此类方法能力的机会。例如，专家组经过讨论，排除了一种针对 String 类的新构建器(该构建器可以创建一个保持单个代码点的 String)。以下是使应用程序使用现有的
API 提供功能的一种简便方法：</p>
<p>#+begin_src java
/**</p>
<h2 id="创建仅含有指定代码点的新-string-dot">创建仅含有指定代码点的新 String.</h2>
<p>*/
String newString(int codePoint) {
return new String(Character.toChars(codePoint));
}
#+end_src</p>
<p>您会注意到，在这个简单的实现中，toChars 方法始终创建一个中间数列，该数列仅使用一次即立即丢弃。如果该方法在您的性能评估中出现，您可能会希望将其优化为针对最为普通的情况，即该代码点为
BMP 字符：</p>
<p>#+begin_src java
/**</p>
<h2 id="创建仅含有指定代码点的新-string-dot">创建仅含有指定代码点的新 String.</h2>
<h2 id="针对-bmp-字符优化的版本">针对 BMP 字符优化的版本。</h2>
<p>*/
String newString(int codePoint) {
if (Character.charCount(codePoint) == 1) {
return String.valueOf((char) codePoint);
}
else {
return new String(Character.toChars(codePoint));
}
}
#+end_src</p>
<p>或者，如果您需要创建许多个这样的
string，则可能希望编写一个重复使用 toChars 方法所使用的数列的通用版本：</p>
<p>#+begin_src java
/**</p>
<h2 id="创建每一个均含有一个指定">创建每一个均含有一个指定</h2>
<h2 id="代码点的新-string-dot">代码点的新 String.</h2>
<h2 id="针对-bmp-字符优化的版本">针对 BMP 字符优化的版本。</h2>
<p>*/
String[] newStrings(int[] codePoints){
String[] result = new String[codePoints.length];
char[] codeUnits = new char[2];
for (int i = 0; i &lt; codePoints.length; i++) {
int count = Character.toChars(codePoints[i], codeUnits, 0);
result[i] = new String(codeUnits, 0, count);
}
return result;
}
#+end_src</p>
<p>不过，最终您可能会发现，您需要的是一个完全不同的解决方案。新的构建器 String(int
codePoint)实际上建议作为 String.valueOf(char)的一个基于代码点的备选方案。在很多情况下，此方法用于消息生成的环境，例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Character &#34;</span> <span class="o">+</span> <span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="kt">char</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34; is invalid.&#34;</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>新的格式化 API 支持增补文字，提供一种更加简单的备选方案：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;Character %c is invalid.%n&#34;</span><span class="o">,</span> <span class="n">codePoint</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>使用此高层 API
不仅简捷，而它有很多特殊的优点：它可以避免串联(串联会使消息很难本地化)，并将需要移进资源包
(resource bundle) 的字符串数量从两个减少到一个。</p>
<h3 id="增补字符透视功能增强">增补字符透视：功能增强</h3>
<p>在支持使用增补字符的 Java 2 平台中的大部分更改没有反映到新的 API
内。一般预期是，处理字符序列的所有接口将以适合其功能的方式处理增补字符。本部分着重讲述为达到此预期所作一些功能增强。</p>
<h3 id="java-编程语言中的标识符">Java 编程语言中的标识符</h3>
<p>Java 语言规范指出所有 Unicode
字母和数字均可用于标识符。许多增补字符是字母或数字，因此 Java
语言规范已经参照新的基于代码点的方法进行更新，以在标识符内定义合法字符。为使用这些新方法，需要检测标识符的
javac 编译器和其他工具都进行了修订。</p>
<h4 id="库内的增补字符支持">库内的增补字符支持</h4>
<p>许多 J2SE 库已经过增强，可以通过现有接口支持增补字符。以下是一些例子：</p>
<p>字符串大小写转换功能已更新，可以处理增补字符，也可以实现 Unicode
标准中规定的特殊大小写规则。
java.util.regex 包已更新，这样模式字符串和目标字符串均可以包含增补字符并将其作为完整单元处理。
现在，在 java.text 包内进行整理处理时，会将增补字符看作完整单元。
java.text.Bidi 类已更新，可以处理增补字符和 Unicode 4.0
中新增的其他字符。请注意，Cypriot Syllabary
字符子集内的增补字符具有从右至左的方向性。</p>
<p>Java 2D API
内的字体渲染和打印技术已经过增强，可以正确渲染和测量包含增补字符的字符串。</p>
<p>Swing 文本组件实现已更新，可以处理包含增补字符的文本。</p>
<h4 id="字符转换">字符转换</h4>
<p>只有很少的字符编码可以表示增补字符。如果是基于 Unicode 的编码(如 UTF-8
和 UTF-16LE)，则旧版的 J2RE
内的字符转换器已经按照正确处理增补字符的方式实现转换。对于 J2RE
5.0，可以表示增补字符的其他编码的转换器已更新：GB18030、x-EUC-TW(现在实现所有
CNS 11643 层面)和 Big5-HKSCS(现在实现 HKSCS-2001)。</p>
<h3 id="在源文件内表示增补字符">在源文件内表示增补字符</h3>
<p>在 Java
编程语言源文件中，如果使用可以直接表示增补字符的字符编码，则使用增补字符最为方便。UTF-8
是最佳的选择。在所使用的字符编码无法直接表示字符的情况下，Java
编程语言提供一种 Unicode
转义符语法。此语法没有经过增强，无法直接表示增补字符。而是使用两个连续的
Unicode 转义符将其表示为 UTF-16 字符表示法中的两个编码单元。例如，字符
U+20000
写作“/uD840/uDC00”。您也许不愿意探究这些转义序列的含义;最好是写入支持所需增补字符的编码，然后使用一种工具(如
native2ascii)将其转换为转义序列。</p>
<p>遗憾的是，由于其编码问题，属性文件仍局限于 ISO
8859-1(除非您的应用程序使用新的 XML
格式)。这意味着您始终必须对增补字符使用转义序列，而且可能要使用不同的编码进行编写，然后使用诸如
native2ascii 的工具进行转换。</p>
<h4 id="经修订的-utf-8">经修订的 UTF-8</h4>
<p>Java 平台对经修订的 UTF-8
已经很熟悉，但是，问题是应用程序开发人员在可能包含增补字符的文本和 UTF-8
之间进行转换时需要更加留神。需要特别注意的是，某些 J2SE 接口使用的编码与
UTF-8 相似但与其并不兼容。以前，此编码有时被称为“Java modified UTF-8”(经
Java 修订的 UTF-8)或(错误地)直接称为“UTF-8”。对于 J2SE
5.0，其说明文档正在更新，此编码将统称为“modified UTF-8”(经修订的
UTF-8)。</p>
<p>经修订的 UTF-8 和标准 UTF-8
之间之所以不兼容，其原因有两点。其一，经修订的 UTF-8 将字符 U+0000
表示为双字节序列 0xC0 0x80，而标准 UTF-8 使用单字节值 0x0.其二，经修订的
UTF-8 通过对其 UTF-16
表示法的两个代理代码单元单独进行编码表示增补字符。每个代理代码单元由三个字节来表示，共有六个字节。而标准
UTF-8 使用单个四字节序列表示整个字符。</p>
<p>Java 虚拟机及其附带的接口(如 Java 本机接口、多种工具接口或 Java
类文件)在 java.io.DataInput 和 DataOutput 接口和类中使用经修订的 UTF-8
实现或使用这些接口和类，并进行序列化。Java 本机接口提供与经修订的 UTF-8
之间进行转换的例程。而标准 UTF-8
由 String 类、java.io.InputStreamReader 和 OutputStreamWriter 类、java.nio.charset 设施
(facility) 以及许多其上层的 API 提供支持。</p>
<p>由于经修订的 UTF-8 与标准的 UTF-8
不兼容，因此切勿同时使用这两种版本的编码。经修订的 UTF-8 只能与上述的
Java 接口配合使用。在任何其他情况下，尤其对于可能来自非基于 Java
平台的软件的或可能通过其编译的数据流，必须使用标准的
UTF-8.需要使用标准的 UTF-8 时，则不能使用 Java 本机接口例程与经修订的
UTF-8 进行转换。</p>
<h4 id="在应用程序内支持增补字符">在应用程序内支持增补字符</h4>
<p>现在，对大多数读者来说最为重要的问题是：必须对应用程序进行哪些更改才能支持增补字符？</p>
<p>答案取决于在应用程序中进行哪种类型的文本处理和使用哪些 Java 平台
API.对于仅以各种形式 char 序列([char[]、java.lang.CharSequence 实现、java.text.CharacterIterator 实现)处理文本和仅使用接受和退回序列(如 char 序列)的
Java API 的应用程序，可能根本不需要进行任何更改。Java 平台 API
的实现应该能够处理增补字符。</p>
<p>对于本身解释单个字符、将单个字符传送给 Java 平台 API
或调用能够返回单个字符的方法的应用程序，则需要考虑这些字符的有效值。在很多情况下，往往不要求支持增补字符。例如，如果某应用程序搜索 char 序列中的
HTML 标记，并逐一检查每个 char，它会知道这些标记仅使用 Basic Latin
字符子集中的字符。如果所搜索的文本含有增补字符，则这些字符不会与标记字符混淆，因为
UTF-16 使用代码单元表示增补字符，而代码单元的值不会用于 BMP 字符。</p>
<p>只有在某应用程序本身解释单个字符、将单个字符传送给 Java 平台 API
或调用能够返回单个字符的方法且这些字符可能为增补字符时，才必须更改该应用程序。在提供使用 char 序列的并行
API 时，最好转而使用此类 API.在其他情况下，有必要使用新的 API
在 char 和基于代码点的表示法之间进行转换，并调用基于代码点的
API.当然，如果您发现在 J2SE 5.0 中有更新、更方便的
API，使您能够支持增补字符并同时简化代码(如上格式化范例中所述)，则没有必要这样做。</p>
<p>您可能会犹豫，是将所有文本转换为代码点表示法(即 int[])然后在该表示法中处理，还是在大多数情况下仍采用 char 序列，仅在需要时转换为代码点，两者之间孰优孰劣很难确定。当然，总体来说，Java
平台 API 相对于 char 序列肯定具有一定的优势，而且采用 Java 平台 API
可以节省内存空间。</p>
<p>对于需要与 UTF-8 之间进行转换的应用程序，还需要认真考虑是需要标准的
UTF-8 还是经修订的 UTF-8，并针对每种 UTF-8 采用适当的 Java
平台。&ldquo;经修订的 UTF-8&quot;部分介绍进行正确选择所需的信息。</p>
<h4 id="使用增补字符测试应用程序">使用增补字符测试应用程序</h4>
<p>经过前面部分的介绍后，无论您是否需要修订应用程序，测试应用程序是否运行正常始终是一种正确的做法。对于不含有图形用户界面的应用程序，有关“在源文件内表示增补字符”　的信息有助于设计测试用例。以下是有关使用图形用户界面进行测试的补充信息。</p>
<p>对于文本输入，Java 2
SDK 提供用于接受“/Uxxxxxx”格式字符串的代码点输入方法，这里大写的“U”表示转义序列包含六个十六进制数字，因此允许使用增补字符。小写的“u”表示转义序列“/uxxxx”的原始格式。您可以在
J2SDK 目录 demo/jfc/CodePointIM 内找到此输入方法及其说明文档。</p>
<p>对于字体渲染，您需要至少能够渲染一些增补字符的字体。其中一种此类字体为
James Kass 的 Code2001 字体，它提供手写体字形(如 Deseret 和 Old
Italic)。利用 Java 2D 库中提供新功能，您只需将该字体安装到 J2RE 的
lib/fonts/fallback 目录内即可，然后它可自动添加至在 2D 和 XAWT
渲染时使用的所有逻辑字体 &mdash; 无需编辑字体配置文件。</p>
<p>至此，您就可以确认，您的应用程序能够完全支持增补字符了！</p>
<h3 id="结论">结论</h3>
<p>对增补字符的支持已经引入 Java
平台，大部分应用程序无需更改代码即可处理这些字符。解释单个字符的应用程序可以在 Character 类和多种 CharSequence 子类中使用基于代码点的新
API.</p>
<h4 id="以下是-unicode-和-utf-8-之间的转换关系表-以下是-unicode-和-utf-8-之间的转换关系表">以下是 Unicode 和 UTF-8 之间的转换关系表： {#以下是 unicode 和 utf-8 之间的转换关系表}</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">U-00000000 - U-0000007F： 0xxxxxxx
</span></span><span class="line"><span class="cl">U-00000080 - U-000007FF： 110xxxxx 10xxxxxx
</span></span><span class="line"><span class="cl">U-00000800 - U-0000FFFF： 1110xxxx 10xxxxxx 10xxxxxx
</span></span><span class="line"><span class="cl">U-00010000 - U-001FFFFF： 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
</span></span><span class="line"><span class="cl">U-00200000 - U-03FFFFFF： 111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx
</span></span><span class="line"><span class="cl">U-04000000 - U-7FFFFFFF： 1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Byte 数组转整数：</li>
</ul>
<!-- raw HTML omitted -->
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">static</span> <span class="kt">int</span> <span class="nf">bytes2int</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">b</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">mask</span><span class="o">=</span><span class="n">0xff</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">temp</span><span class="o">=</span><span class="n">0</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">res</span><span class="o">=</span><span class="n">0</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">4</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
</span></span><span class="line"><span class="cl">             <span class="n">res</span><span class="o">&lt;&lt;=</span><span class="n">8</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">             <span class="n">temp</span><span class="o">=</span><span class="n">b</span><span class="o">[</span><span class="n">i</span><span class="o">]&amp;</span><span class="n">mask</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">             <span class="n">res</span><span class="o">|=</span><span class="n">temp</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">res</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>整数转 byte 数组：</li>
</ul>
<!-- raw HTML omitted -->
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">static</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">int2bytes</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">byte</span><span class="o">[]</span> <span class="n">b</span><span class="o">=</span><span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">4</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">mask</span><span class="o">=</span><span class="n">0xff</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">4</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
</span></span><span class="line"><span class="cl">            <span class="n">b</span><span class="o">[</span><span class="n">i</span><span class="o">]=(</span><span class="kt">byte</span><span class="o">)(</span><span class="n">num</span><span class="o">&gt;&gt;&gt;(</span><span class="n">24</span><span class="o">-</span><span class="n">i</span><span class="o">*</span><span class="n">8</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">b</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/java/">Java</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    <section class="article-lastmod">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <span>
            最后更新于 Apr 10, 2022 01:46 CST
        </span>
    </section></footer>


    
</article>

    

    

<aside class="related-contents--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-contents">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/java%E4%B8%AD%E7%9A%8423%E4%B8%AD%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-1/">
        
        

        <div class="article-details">
            <h2 class="article-title">Java中的23中设计模式 (1)</h2>
        </div>
    </a>
</article>
            
                
<article class="">
    <a href="/p/java%E4%B8%AD%E7%9A%8423%E4%B8%AD%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-4/">
        
        

        <div class="article-details">
            <h2 class="article-title">Java中的23中设计模式 (4)</h2>
        </div>
    </a>
</article>
            
                
<article class="">
    <a href="/p/volatile%E5%85%B3%E9%94%AE%E5%AD%97%E8%AF%A6%E8%A7%A3%E8%BD%AC/">
        
        

        <div class="article-details">
            <h2 class="article-title">volatile关键字详解(转)</h2>
        </div>
    </a>
</article>
            
                
<article class="">
    <a href="/p/jrebel%E6%BF%80%E6%B4%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/">
        
        

        <div class="article-details">
            <h2 class="article-title">Jrebel激活服务器及使用方法</h2>
        </div>
    </a>
</article>
            
                
<article class="">
    <a href="/p/randomaccess%E6%8E%A5%E5%8F%A3%E7%90%86%E8%A7%A3/">
        
        

        <div class="article-details">
            <h2 class="article-title">RandomAccess接口理解</h2>
        </div>
    </a>
</article>
            
        </div>
    </div>
</aside>

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (DISQUS) {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2022 Waver 的博客
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.11.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li>
      <ol>
        <li><a href="#摘要">摘要</a></li>
        <li><a href="#背景">背景</a></li>
        <li><a href="#代码点字符编码方案utf-16这些是指什么-代码点字符编码方案-utf-16-这些是指什么">代码点、字符编码方案、UTF-16：这些是指什么？ {#代码点字符编码方案 utf-16 这些是指什么}</a>
          <ol>
            <li><a href="#下表所示为几个字符不同表达方式的比较">下表所示为几个字符不同表达方式的比较：</a></li>
          </ol>
        </li>
        <li><a href="#java-平台中增补字符的设计方法">Java 平台中增补字符的设计方法</a></li>
      </ol>
    </li>
    <li><a href="#创建仅含有指定代码点的新-string-dot">创建仅含有指定代码点的新 String.</a></li>
    <li><a href="#创建仅含有指定代码点的新-string-dot">创建仅含有指定代码点的新 String.</a></li>
    <li><a href="#针对-bmp-字符优化的版本">针对 BMP 字符优化的版本。</a></li>
    <li><a href="#创建每一个均含有一个指定">创建每一个均含有一个指定</a></li>
    <li><a href="#代码点的新-string-dot">代码点的新 String.</a></li>
    <li><a href="#针对-bmp-字符优化的版本">针对 BMP 字符优化的版本。</a>
      <ol>
        <li><a href="#增补字符透视功能增强">增补字符透视：功能增强</a></li>
        <li><a href="#java-编程语言中的标识符">Java 编程语言中的标识符</a>
          <ol>
            <li><a href="#库内的增补字符支持">库内的增补字符支持</a></li>
            <li><a href="#字符转换">字符转换</a></li>
          </ol>
        </li>
        <li><a href="#在源文件内表示增补字符">在源文件内表示增补字符</a>
          <ol>
            <li><a href="#经修订的-utf-8">经修订的 UTF-8</a></li>
            <li><a href="#在应用程序内支持增补字符">在应用程序内支持增补字符</a></li>
            <li><a href="#使用增补字符测试应用程序">使用增补字符测试应用程序</a></li>
          </ol>
        </li>
        <li><a href="#结论">结论</a>
          <ol>
            <li><a href="#以下是-unicode-和-utf-8-之间的转换关系表-以下是-unicode-和-utf-8-之间的转换关系表">以下是 Unicode 和 UTF-8 之间的转换关系表： {#以下是 unicode 和 utf-8 之间的转换关系表}</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
